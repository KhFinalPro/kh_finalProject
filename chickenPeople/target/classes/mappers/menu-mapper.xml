<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="menuMapper">
  <resultMap type="Menu" id="menuResultSet">
 		<id property="menu_Num" column="MENU_NUM"/>
 		<result property="brand_Name" column="BRAND_NAME"/>
 		<result property="menu_Name" column="MENU_NAME"/>
 		<result property="menu_Price" column="MENU_PRICE"/>
 		<result property="menu_Exp" column="MENU_EXP"/>
 		<result property="menu_Yn" column="MENU_YN"/>
 		<result property="cat_Name" column="CAT_NAME"/>
 		<result property="menu_Pic" column="MENU_PIC"/>
 	</resultMap>
 	<resultMap type="brand" id="brandResultSet">
 		<id property="brand_code" column="BRAND_CODE"/>
 		<result property="brand_pic" column="BRAND_PIC"/>
 		<result property="brand_name" column="BRAND_NAME"/>
 		<result property="brand_yn" column="BRAND_YN"/>	
 	</resultMap>
 	
 	<select id="getListCount" resultType="_int">
 		SELECT COUNT(*) 
 		FROM ADMIN_MENU
 	</select>
 	<select id="getSearchListCount" resultType="_int">
 		SELECT COUNT(*)
		FROM (SELECT *
			  FROM ADMIN_MENU
			  WHERE MENU_YN=#{searchStatus}
			  <if test="searchCategory!='total'">
			  AND BRAND_NAME=#{searchCategory}
			  </if>
			  <if test="searchName!=null">
			  AND MENU_NAME LIKE '%'||#{searchName}||'%'
			  </if>)
 	</select>
 	
	<select id="selectMenu" resultMap="menuResultSet">
		SELECT * FROM ADMIN_MENU
		ORDER BY 1
	</select>
	
	<select id="selectBrand" resultMap="brandResultSet">
		SELECT * FROM BRAND
	</select>
	
	<select id="selectSearchMenu" parameterType="SearchStatus" resultMap="menuResultSet">
			SELECT * FROM ADMIN_MENU
			WHERE MENU_YN=#{searchStatus}
		<if test="searchCategory!='total'">	
			AND BRAND_NAME=#{searchCategory}
		</if>		
		<if test="searchName!=null">
			AND MENU_NAME LIKE '%'||#{searchName}||'%'
		</if>
	</select>
	<select id="selectOneMenu" resultMap="menuResultSet" parameterType="_int">
		SELECT * 
		FROM ADMIN_MENU
		WHERE MENU_NUM=#{menu_Num}
	</select>
	
	<update id="changeMenuY" parameterType="_int">
		UPDATE MENU
		SET MENU_YN='Y'
		WHERE MENU_NUM=#{menu_Num}
	</update>
	<update id="changeMenuN" parameterType="_int">
		UPDATE MENU
		SET MENU_YN='N'
		WHERE MENU_NUM=#{menu_Num}
	</update>
  
</mapper>
